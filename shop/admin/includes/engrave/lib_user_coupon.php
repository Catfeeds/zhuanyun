<?php /** * 根据优惠券序列号获取优惠券数组对象 * @param string $sn：优惠券序列号 * @return unknown：优惠券数组 */function engrave_user_coupon_bysn($sn = ''){	$sql="select CUId,SN,coupon.CouponId,OwnerId,UserId,CreateTime,ExpireTime,LastUse,UseTime,".	"Source,Description,StatusId,IsDeleteCoupons".	",TypeId,CouponName,CouponImage,Message,CouponValue,".	"RebatePoints,Days,Roles,MinAmount,MaxAmount,StatusId,IsDeleteCoupon"	." from ".$GLOBALS['ecs']->table('user_coupon').	" as ucoupon left join ".$GLOBALS['engrave']->table('coupon').	" as coupon on ucoupon.CouponId=coupon.CouponId".	" where SN='".$sn."'";		$result = $GLOBALS['db']->getRow($sql);		return $result;}/** * 修改：优惠券使用-》未使用 * @param string $sn：优惠券序列号 * @return boolean：若修改成功，返回true，反之返回false！ */function engrave_user_coupon_updatenotused($sn=''){	$sql="update ".$GLOBALS['ecs']->table('user_coupon').	" set StatusId=0,UseTime='0000-00-00 00:00:00' where SN='".	$sn."'";	$result = $GLOBALS['db']->query($sql);		if($result !== false)	{		return false;	}else{		return true;	}}