<?php/** *  网站分类 相关函数 * ============================================================================ * * 版权所有 * 网站地址: * ---------------------------------------------------------------------------- * 这不是一个自由软件！您只能在不用于商业目的的前提下对程序代码进行修改和 * 使用；不允许对程序代码以任何形式任何目的的再发布。 * ============================================================================ * $Author: zxp $ * $Id: $ *//** * 获得网站分类列表 * * @access  public * @params  integer $isdelete * @params  integer $real_goods * @params  integer $conditions * @return  array */function engrave_focuse_list($real_goods=1, $conditions = ''){	/* 记录总数 */	$sql_count = "SELECT COUNT(*) FROM " .$GLOBALS['engrave']->table('focusmap');	$filter['record_count'] = $GLOBALS['engrave_db']->getOne($sql_count);	/* 分页大小 */	$filter = page_and_size($filter);	$sql = "SELECT FocusId,Title,ImgUrl,LinkUrl,Systime,State " .			" FROM " . $GLOBALS['engrave']->table('focusmap') .			" where 1 ".			" LIMIT " . $filter['start'] . ",$filter[page_size]";	$filter['keyword'] = stripslashes($filter['keyword']);	//set_filter($filter, $sql, $param_str);	$row = $GLOBALS['engrave_db']->getAll($sql);	return array('focuse_list' => $row, 'filter' => $filter, 'page_count' => $filter['page_count'], 'record_count' => $filter['record_count']);}/** * 获取焦点图列表 * @param number $isdelete：是否删除 * @param string $conditions：查询条件 */function engrave_focuse($FocusId=''){	$conditions='';	if($FocusId!='')	{		$conditions=$conditions." and FocusId='".$FocusId."'";	}	$sql = "select FocusId,Title,Description,ImgUrl,LinkUrl,Systime,State" .			" FROM " . $GLOBALS['engrave']->table('focusmap').			" where 1 " . $conditions;	return $GLOBALS['engrave_db']->getRow($sql);}/** * 添加焦点图 * @param unknown $focuse：焦点图对象 */function engrave_focuse_insert($focuse){	$sql="insert into ".$GLOBALS['engrave']->table('focusmap').	"(Title,Description,ImgUrl,LinkUrl,Systime,State,IsFocuseDelete) values('".	$focuse['Title']."','".$focuse['Description']."','".$focuse['ImgUrl']."','".$focuse['LinkUrl']."','".local_date('Y-m-d H:i:s')."','".	$focuse['State']."','".$focuse['IsFocuseDelete']."')";		return $GLOBALS['engrave_db']->query($sql);}/** * 编辑焦点图 * @param unknown $focuse：焦点图对象 * @param unknown $FocuseIdId：焦点图ID */function engrave_focuse_update($focuse,$FocuseId){	$sql="update ".$GLOBALS['engrave']->table('focusmap').	"set Title='".$focuse['Title'].	"',Description='".$focuse['Description'].	"',ImgUrl='".$focuse['ImgUrl'].	"',Systime='".local_date('Y-m-d H:i:s').	"',LinkUrl='".$focuse['LinkUrl'].	"',State='".$focuse['State'].	"' where FocusId='".$FocuseId."'";	return $GLOBALS['engrave_db']->query($sql);}/** * 焦点图删除 * @param number $IsFocuseDelete：删除标识 * @param unknown $focuseId：焦点图ID */function engrave_focuse_delete($IsFocuseDelete=1,$focuseId){	$sql="update ".$GLOBALS['engrave']->table('focusmap').	" set IsFocuseDelete='".$IsFocuseDelete."' where FocusId='".	$focuseId."'";	return  $GLOBALS['engrave_db']->query($sql);}?>