<?php /** * ENGRAVE 数据访问：收货人地址 * =========================================================== * 版权所有 2014-2019 青岛友腾信息科技有限公司，并保留所有权利。 * 网站地址: http://www.qdutsoft.com； * ---------------------------------------------------------- * 这不是一个自由软件！您只能在不用于商业目的的前提下对程序代码进行修改和 * 使用；不允许对程序代码以任何形式任何目的的再发布。 * ========================================================== * $Author: zhangxingpeng $ * $Id: lib_user_address_manage.php 17217 2014年11月28日 11时03分00秒 zhangxingpeng $ *//** * 收货人地址列表 * @param number $isdelete：是否删除 * @param string $conditions：where条件 * @return multitype:unknown string：列表 */function engrave_user_address_list($isdelete=0, $conditions = ' and 1'){	/* 记录总数 */	$sql_count = "SELECT COUNT(*) FROM " .$GLOBALS['ecs']->table('users_deliveryaddress').				" where da_isdelete=".$isdelete." ".$conditions;		$filter = array();	$filter['sort_by']      = empty($_REQUEST['sort_by']) ? 'da_id' : trim($_REQUEST['sort_by']);	$filter['sort_order']   = empty($_REQUEST['sort_order']) ? 'DESC' : trim($_REQUEST['sort_order']);		$filter['record_count'] = $GLOBALS['db']->getOne($sql_count);	/* 分页大小 */	$filter = page_and_size($filter);	$sql = "select da_id,da_userid,da_name,da_consignee,da_consigneetelephone,da_sparetelephone,da_country,da_province,da_city,da_address,da_zipcode,".	"da_remark,da_identitycard,da_identitycardfront,da_identitycardbehind,da_email,da_isdelete,da_identityassemble,da_attach,da_isvalidate" .	",da_adminremark FROM " . $GLOBALS['ecs']->table('users_deliveryaddress') .	" where da_isdelete= ".$isdelete.$conditions.	" order by " .$filter['sort_by'].' '.$filter['sort_order'] .	" LIMIT " . $filter['start'] . ",$filter[page_size]";		$filter['keyword'] = stripslashes($filter['keyword']);	$row = $GLOBALS['db']->getAll($sql);	return array('address_list' => $row, 'filter' => $filter, 'page_count' => $filter['page_count'], 'record_count' => $filter['record_count']);}/** * 根据ID获取收货人地址 * @param number $da_id：收货人地址ID * @return unknown：收货人地址对象 */function engrave_user_address_byid($da_id=0){	$sql = "select da_id,da_userid,da_name,da_consignee,da_consigneetelephone,da_sparetelephone,da_country,da_province,da_city,da_address,da_zipcode,".			"da_remark,da_identitycard,da_identitycardfront,da_identitycardbehind,da_email,da_isdelete,da_identityassemble,da_attach,da_isvalidate" .			",da_adminremark FROM " . $GLOBALS['ecs']->table('users_deliveryaddress') .			" where da_id= ".$da_id;	$row = $GLOBALS['db']->getRow($sql);	return $row;}/** * 修改：验证状态、管理员备注 * @param unknown $address：验证状态、管理员备注 * @return boolean：若修改成功，返回true，反之，返回false！ */function engrave_user_address_update_validate($address){	$sql = "update ".$GLOBALS['ecs']->table('users_deliveryaddress') .	" set da_isvalidate='" .$address['da_isvalidate'].	"',da_adminremark = '" . $address['da_adminremark'] .	"' where da_id= ".$address['da_id'];	$row = $GLOBALS['db']->query($sql);	if($row!==false)	{		return true;	}	else{		return false;	}}?>